---
title: DMA
---

DMA（Direct Memory Access），是CPU访问外部设备的最基础的解决方案。

我们已经知道CPU访问一块外部RAM的方法：使用LOAD和STORE指令，将地址、数据和读写信号连接到RAM的对应的输入接口上，将RAM的数据输出接口连接到WB模块写回寄存器组。

如果是非RAM的设备呢？需要跟访问RAM一样，规定一种类似于LOAD和STORE的新指令，再预留一排专用接口，执行这种新型指令时，在这些接口上读写数据...

...吗？

可是LOAD和STORE的功能不就是读写数据吗？

---
这就是CPU读写外部设备接口的最简单直接的解决方案——DMA。

CPU需要读取外设数据时，可以将RAM上某段地址对应的寄存器拿掉，直接把外设的输出端口插进去。CPU通过LOAD指令寻址时，选择器在这个地址上读到的就是外设的输出值。

CPU需要向外设输出数据时，则可以直接将寄存器的输出端飞一条线出来，连接到外设的输入端口上。STORE指令向这些寄存器写入值时，这些值马上会出现在外设的输出端。

实际应用中，RAM当然都是一整块的，肯定不能直接抠寄存器和飞线。